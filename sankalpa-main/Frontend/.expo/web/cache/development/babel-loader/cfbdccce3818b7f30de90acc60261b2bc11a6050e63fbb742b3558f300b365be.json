{"ast":null,"code":"import _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport React, { useEffect, useState } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Card, Text, Button } from 'react-native-paper';\nimport * as ScreenOrientation from 'expo-screen-orientation';\nimport AppBa3 from \"../components/appBa3\";\nimport { useNavigation } from '@react-navigation/core';\nimport BackHandler from \"react-native-web/dist/exports/BackHandler\";\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nvar GamePage1 = function GamePage1(_ref) {\n  var navigation = _ref.navigation,\n    route = _ref.route;\n  var parentqp = route.params;\n  var lockOrientationToLandscape = function lockOrientationToLandscape() {\n    ScreenOrientation.lockAsync(ScreenOrientation.OrientationLock.LANDSCAPE);\n    var backHandler = BackHandler.addEventListener('hardwareBackPress', function () {\n      BackHandler.exitApp();\n      return true;\n    });\n    return function () {\n      backHandler.remove();\n    };\n  };\n  useEffect(function () {\n    var orientationLoop = setInterval(function () {\n      lockOrientationToLandscape();\n    }, 100);\n    return function () {\n      clearInterval(orientationLoop);\n    };\n  }, []);\n  var getStageStatus = function () {\n    var _ref2 = _asyncToGenerator(function* (id) {\n      try {\n        var requestData = {\n          _id: id\n        };\n        var response = yield axios.post('http://192.168.8.147:8000/api/studentby', requestData);\n        var studentData = response.data[0];\n        var stageStatus = studentData.StageStatus;\n        return stageStatus;\n      } catch (error) {\n        console.error('Error fetching student data:', error);\n        return null;\n      }\n    });\n    return function getStageStatus(_x) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n  var Next = function () {\n    var _ref3 = _asyncToGenerator(function* () {\n      try {\n        var StudentID = yield AsyncStorage.getItem('CurrentstudentID');\n        if (StudentID) {\n          var updateApiUrl = \"http://192.168.8.147:8000/api/student/update/\" + StudentID;\n          var response = yield axios.put(updateApiUrl, parentqp);\n          console.log('Success updated parentq to student:', response.data);\n          var stageStatus = yield getStageStatus(StudentID);\n          if (stageStatus !== null) {\n            console.log('StageStatus:', stageStatus);\n            if (stageStatus === false) {\n              navigation.navigate('GamePage4');\n            } else {\n              navigation.navigate('GamePage12');\n            }\n          }\n        } else {\n          console.log('Current student ID not found in AsyncStorage.');\n        }\n      } catch (error) {\n        console.error('Error posting data:', error);\n      }\n    });\n    return function Next() {\n      return _ref3.apply(this, arguments);\n    };\n  }();\n  var showAlert = function showAlert() {\n    Alert.alert('! Warning', 'Take a test for get resutls', [{\n      text: 'OK',\n      onPress: function onPress() {\n        return console.log('OK Pressed');\n      }\n    }], {\n      cancelable: false\n    });\n  };\n  return _jsxs(View, {\n    style: styles.container,\n    children: [_jsx(StatusBar, {\n      style: \"inverted\"\n    }), _jsx(AppBa3, {\n      title: 'Quiz Zone '\n    }), _jsxs(ScrollView, {\n      horizontal: true,\n      children: [_jsxs(Card, {\n        mode: \"outlined\",\n        style: styles.card,\n        children: [_jsx(Card.Cover, {\n          style: styles.cardCover,\n          source: require(\"../assets/image/Other/box1.png\")\n        }), _jsxs(Card.Content, {\n          style: styles.margin,\n          children: [_jsx(Text, {\n            variant: \"bodyMedium\",\n            children: \"Go through these instructions before starting\"\n          }), _jsx(Button, {\n            style: styles.margin,\n            textColor: \"#ffff\",\n            onPress: function onPress() {\n              navigation.navigate('Instruction');\n            },\n            mode: \"contained\",\n            children: \"GET STARTED\"\n          })]\n        })]\n      }), _jsxs(Card, {\n        mode: \"outlined\",\n        style: styles.card,\n        children: [_jsx(Card.Cover, {\n          style: styles.cardCover,\n          source: require(\"../assets/image/Other/box2.png\")\n        }), _jsxs(Card.Content, {\n          style: styles.margin,\n          children: [_jsx(Text, {\n            variant: \"bodyMedium\",\n            children: \"Test your math knowledge... Try this now...\"\n          }), _jsx(Button, {\n            style: styles.margin,\n            textColor: \"#ffff\",\n            onPress: Next,\n            mode: \"contained\",\n            children: \"PLAY\"\n          })]\n        })]\n      }), _jsxs(Card, {\n        mode: \"outlined\",\n        style: styles.card,\n        children: [_jsx(Card.Cover, {\n          style: styles.cardCover,\n          source: require(\"../assets/image/Other/box3.png\")\n        }), _jsxs(Card.Content, {\n          style: styles.margin,\n          children: [_jsx(Text, {\n            variant: \"bodyMedium\",\n            children: \"Test your math knowledge... Try this now...\"\n          }), _jsx(Button, {\n            style: styles.margin,\n            textColor: \"#ffff\",\n            onPress: showAlert,\n            mode: \"contained\",\n            children: \"Results\"\n          })]\n        })]\n      })]\n    })]\n  });\n};\nvar styles = StyleSheet.create({\n  margin: {\n    margin: 7\n  },\n  container: {\n    flex: 1\n  },\n  cardCover: {\n    height: 150,\n    resizeMode: 'center'\n  },\n  card: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    margin: 12,\n    backgroundColor: '#ffff',\n    width: 250\n  }\n});\nexport default GamePage1;","map":{"version":3,"names":["React","useEffect","useState","StatusBar","View","StyleSheet","ScrollView","Alert","Card","Text","Button","ScreenOrientation","AppBa3","useNavigation","BackHandler","axios","AsyncStorage","jsx","_jsx","jsxs","_jsxs","GamePage1","_ref","navigation","route","parentqp","params","lockOrientationToLandscape","lockAsync","OrientationLock","LANDSCAPE","backHandler","addEventListener","exitApp","remove","orientationLoop","setInterval","clearInterval","getStageStatus","_ref2","_asyncToGenerator","id","requestData","_id","response","post","studentData","data","stageStatus","StageStatus","error","console","_x","apply","arguments","Next","_ref3","StudentID","getItem","updateApiUrl","put","log","navigate","showAlert","alert","text","onPress","cancelable","style","styles","container","children","title","horizontal","mode","card","Cover","cardCover","source","require","Content","margin","variant","textColor","create","flex","height","resizeMode","justifyContent","alignItems","backgroundColor","width"],"sources":["F:/SLIIT/year 04/Final edited research/Dyscalculia-main/Sankalpa/screens/Gamepage1.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { StatusBar } from 'expo-status-bar';\nimport { View, StyleSheet, ScrollView, Alert } from 'react-native';\nimport { Card, Text, Button } from 'react-native-paper';\nimport * as ScreenOrientation from 'expo-screen-orientation';\nimport AppBa3 from '../components/appBa3';\nimport { useNavigation } from '@react-navigation/core';\nimport { BackHandler } from 'react-native';\nimport axios from 'axios';\nimport AsyncStorage from '@react-native-async-storage/async-storage';\n\nconst GamePage1 = ({ navigation, route }) => {\n  const parentqp = route.params;\n\n  const lockOrientationToLandscape = () => {\n    // Lock the screen orientation to landscape\n    ScreenOrientation.lockAsync(ScreenOrientation.OrientationLock.LANDSCAPE);\n\n    // Handle back button press\n    const backHandler = BackHandler.addEventListener('hardwareBackPress', () => {\n      // Exit the app when the back button is pressed\n      BackHandler.exitApp();\n      return true; // Prevent default behavior (going back to the previous screen)\n    });\n\n    return () => {\n      // Remove the back button event listener when the component unmounts\n      backHandler.remove();\n    };\n  };\n\n  useEffect(() => {\n    // Start a loop to repeatedly lock the orientation to landscape\n    const orientationLoop = setInterval(() => {\n      lockOrientationToLandscape();\n    }, 100); // Check every 1 second\n\n    // Clean up the loop when the component is unmounted\n    return () => {\n      clearInterval(orientationLoop);\n    };\n  }, []);\n\n  \n  const getStageStatus = async (id) => {\n    try {\n      // Prepare the request data with the student ID\n      const requestData = {\n        _id: id,\n      };\n\n      // Send the POST request to get student data\n      const response = await axios.post('http://192.168.8.147:8000/api/studentby', requestData);\n\n      // Extract the StageStatus property from the response data\n      const studentData = response.data[0];\n      const stageStatus = studentData.StageStatus;\n\n      // Return the StageStatus\n      return stageStatus;\n    } catch (error) {\n      console.error('Error fetching student data:', error);\n      return null; // or handle the error in an appropriate way\n    }\n  };\n\n  const Next = async () => {\n    \n    try {\n      // Get the cached current student ID from AsyncStorage\n      const StudentID = await AsyncStorage.getItem('CurrentstudentID');\n\n      // Check if the currentStudentID is available in AsyncStorage\n      if (StudentID) {\n        // Use the currentStudentID in the API URL for updating parentq\n        const updateApiUrl = `http://192.168.8.147:8000/api/student/update/${StudentID}`;\n        const response = await axios.put(updateApiUrl, parentqp);\n        console.log('Success updated parentq to student:', response.data);\n\n        // Get stage status for navigation\n        const stageStatus = await getStageStatus(StudentID);\n\n        if (stageStatus !== null) {\n          console.log('StageStatus:', stageStatus);\n\n          if (stageStatus === false) {\n            navigation.navigate('GamePage4');\n          } else {\n            navigation.navigate('GamePage12');\n          }\n        }\n      } else {\n        console.log('Current student ID not found in AsyncStorage.');\n      }\n    } catch (error) {\n      console.error('Error posting data:', error);\n    }\n  };\n\n  const showAlert = () => {\n    Alert.alert(\n      '! Warning',\n      'Take a test for get resutls',\n      [\n        { text: 'OK', onPress: () => console.log('OK Pressed') }\n      ],\n      { cancelable: false }\n    );\n  };\n\n  return (\n    <View style={styles.container}>\n      <StatusBar style=\"inverted\" />\n      <AppBa3 title={'Quiz Zone '} />\n\n      <ScrollView horizontal={true}>\n        <Card mode=\"outlined\" style={styles.card}>\n          <Card.Cover style={styles.cardCover} source={require('../assets/image/Other/box1.png')} />\n          <Card.Content style={styles.margin}>\n            <Text variant=\"bodyMedium\">Go through these instructions before starting</Text>\n            <Button style={styles.margin} textColor=\"#ffff\" onPress={() => { navigation.navigate('Instruction') }} mode=\"contained\">\n              GET STARTED\n            </Button>\n          </Card.Content>\n        </Card>\n        <Card mode=\"outlined\" style={styles.card}>\n          <Card.Cover style={styles.cardCover} source={require('../assets/image/Other/box2.png')} />\n          <Card.Content style={styles.margin}>\n            <Text variant=\"bodyMedium\">Test your math knowledge... Try this now...</Text>\n            <Button style={styles.margin} textColor=\"#ffff\" onPress={Next} mode=\"contained\">\n              PLAY\n            </Button>\n          </Card.Content>\n        </Card>\n        <Card mode=\"outlined\" style={styles.card}>\n          <Card.Cover style={styles.cardCover} source={require('../assets/image/Other/box3.png')} />\n          <Card.Content style={styles.margin}>\n            <Text variant=\"bodyMedium\">Test your math knowledge... Try this now...</Text>\n            <Button style={styles.margin} textColor=\"#ffff\" onPress={showAlert} mode=\"contained\">\n              Results\n            </Button>\n          </Card.Content>\n        </Card>\n      </ScrollView>\n    </View>\n  );\n};\n\nconst styles = StyleSheet.create({\n  margin: {\n    margin: 7\n  },\n  container: {\n    flex: 1,\n   \n  },\n  cardCover: {\n    height: 150,\n    resizeMode: 'center'\n  },\n  card: {\n    justifyContent: 'center',\n    alignItems: 'center',\n    margin:12,\n    backgroundColor: '#ffff',\n    width: 250\n  }\n});\n\nexport default GamePage1;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}